[トップページに戻る](README.md)
[目次に戻る](FTKR_ItemCompositionSystem.ja.md#目次)

# 基本設定

## メニューコマンドの設定

メニュー画面に表示されるコマンドは、プラグインパラメータ`Menu Command`で設定します。

プラグインパラメータはリスト入力になっており、リストを追加するとメニュー画面上の合成コマンドを増やすことができます。

コマンド毎にどのような表示内容にするかは、別のプラグインパラメータで設定します。

![画像](image/FTKR_ItemCompositSystem/n05_002.png)

リストの中身は、下図のように構造体になっており以下の設定をリスト毎に設定できます。

`enabled`

メニュー画面にコマンドを表示するかどうかを設定します。
1 の時に表示します。（デフォルトで設定済み）

`name`

メニュー画面上に表示するコマンド名を設定します。
制御文字が使用可能です。

`switchId`

0 を指定した場合は、この機能は無効です。
1 以上の値を設定した場合、そのIDのスイッチが ON 状態の時にメニューに表示します。

![画像](image/FTKR_ItemCompositSystem/n05_001.png)

[上に戻る](#基本設定)　　　[目次に戻る](FTKR_ItemCompositionSystem.ja.md#目次)

## アイテム合成画面の設定

アイテム合成画面は、以下のウィンドウで構成しています。

* 合成タイトルウィンドウ
  * 下図で「合成」と表示している部分
* 合成コマンドウィンドウ
  * 下図で「合成を行う」等のコマンドを表示している部分
* アイテムリストウィンドウ
  * 下図でアイテム名を表示している部分
  * 合成コマンドで選択したカテゴリーの所持アイテムを表示する。
* スロットタイトルウィンドウ
  * 下図で「合成アイテム」と表示している部分
* 素材スロットウィンドウ
  * 下図で「未設定」等と表示している部分
  * アイテムリストで選択したアイテムがここに表示される。
* 合成情報タイトルウィンドウ
  * 下図で「合成情報」と表示している部分
* 合成情報ウィンドウ
  * 下図で「？？？」と表示している部分
  * 主に合成アイテムの情報や難易度、生成数などを表示する。
* 背景
  * 背景に画像を表示させることが出来ます。

表示しているアイテム名以外の文字列は、プラグインパラメータで設定可能で、制御文字が使用できます。

また、文字列を設定するプラグインパラメータは、すべてリスト方式で、リスト番号はメニューコマンドのリスト番号に紐付きます。

![画像](image/FTKR_ItemCompositSystem/n01_003.png)

[上に戻る](#基本設定)　　　[目次に戻る](FTKR_ItemCompositionSystem.ja.md#目次)

### 合成コマンドウィンドウの設定

合成コマンドで表示するコマンドの表示項目と順番は
プラグインパラメータ`<Command List>`の設定で変更できます。

以下の文字列を入力した順番にコマンドを上から表示します。
入力する文字列は、必ず小文字にしてください。

各コマンドは、プラグインパラメータで表示名を設定可能です。

| コード | 内容 | 表示名設定用プラグインパラメータ |
| --- | --- | --- |
| action | 合成を実行するコマンド | Action Cmd Name |
| item | 『アイテム』の選択コマンド(*1) | Item Cmd Name |
| weapon | 『武器』の選択コマンド(*1) | Weapon Cmd Name |
| armor | 『防具』の選択コマンド(*1) | Armor Cmd Name |
| change | 右側のアイテムウィンドウに、アイテムを表示するか、レシピを表示するか変えるコマンド | Change Materials Name<br>Change Resipes Name |
| slot | 素材スロットにカーソルを移動するコマンド | Slot Cmd Name |
| end | 合成を止めるコマンド | End Cmd Name |
| custom* | 特定の合成カテゴリーだけ表示する選択コマンドで、*の番号はプラグインパラメータ`Custom Cmd *`の設定番号と同じ(*1) | Custom Cmd * Name |

![画像](image/FTKR_ItemCompositSystem/n05_003.png)

(*1)';'で入力したコマンド名を区切って２種類設定すると、素材選択時とレシピ選択時でコマンド名を変えることが出来ます。

入力例)
```
アイテム素材;アイテムレシピ
```
素材から選ぶ時はコマンド名が「アイテム素材」に、レシピから選ぶ時は「アイテムレシピ」に表示が変わります。

なお、セミコロンの片側を空欄にした場合は、空欄にした側の選択時にコマンドを表示しません。

アイテムの選択コマンド名を「アイテム;」とした場合、素材選択時は「アイテム」コマンドを表示するが、レシピ選択時は表示しません。

[上に戻る](#基本設定)　　　[目次に戻る](FTKR_ItemCompositionSystem.ja.md#目次)

#### 合成カテゴリーコマンドの設定

以下のプラグインパラメータで、合成カテゴリーコマンドを設定できます。

`Custom Cmd * Name`

合成コマンドウィンドウで表示する名前を設定します。
セミコロンを使うことで、素材選択時とレシピ選択時で表示を変えることができます。
制御文字が使用できます。

`Custom Cmd * Category`

このコマンドを選択した時にアイテムリストウィンドウに表示する合成カテゴリーを指定します。

アイテムのメモ欄で設定した合成カテゴリーを記載してください。

[上に戻る](#基本設定)　　　[目次に戻る](FTKR_ItemCompositionSystem.ja.md#目次)

### 背景画像の設定

プラグインパラメータ`Background Image Name`に画像ファイルを指定すると、アイテム合成画面の背景に画像を表示することができます。

このプラグインパラメータもリスト入力になっており、メニューコマンド毎に画像を変更することが可能です。

使用する画像ファイルは、/imge/systemフォルダに保存してください。

なお、画像を表示させる場合は、各ウィンドウの透明度(opacity)をプラグインパラメータで変更すると見やすくなります。

[上に戻る](#基本設定)　　　[目次に戻る](FTKR_ItemCompositionSystem.ja.md#目次)

## アイテム合成時の設定

### レシピがない組み合わせの場合の挙動

当プラグインでは、自由に合成素材を選択して合成を実行することが可能です。
そのため、レシピがない組み合わせになる場合が考えられます。

この時の挙動をプラグインパラメータ`Not Applicable to Recipe`で設定することができます。

* lost : 使用した素材が消失します。
* reset : 使用した素材が無くならずに、アイテムリストに戻ります。

### レシピとの合致条件

例えば、「ポーション」のレシピが「ポーションの元」と「薬草」で、スロットにセットした素材が、「ポーションの元」「薬草」「毒消し草」のように、余計な素材を含んでいた場合の挙動を、プラグインパラメータ`<Recipe Matching Pattern>`で以下の様に設定できます。

 * 0 - レシピと同じ素材を含んでいれば、不要な素材をセットしても合致
 * 1 - レシピと素材アイテムの組み合わせが同一の場合に合致

[上に戻る](#基本設定)　　　[目次に戻る](FTKR_ItemCompositionSystem.ja.md#目次)

### アイテム合成時の確認

`<Enable Confirmation>`

アイテム合成実行時に確認画面を表示して、実行するか確認するかを指定します。
 * 1 - 確認する
 * 0 - 確認しない

![EnableConfirmation](image/FTKR_ItemCompositSystem/n01_014.png)

確認する場合は、アイテム合成実行時に下のウィンドウを表示します。

![確認画面](image/FTKR_ItemCompositSystem/n01_005.png)

[上に戻る](#基本設定)　　　[目次に戻る](FTKR_ItemCompositionSystem.ja.md#目次)

### アイテム合成時のＳＥ

プラグインパラメータでアイテム合成時のSEを、成功、大成功、失敗、消失のぞれぞれ別に設定できます。

SEの設定項目は、SE名、音量、ピッチ、位相です。

SEは、メニューコマンド毎に設定を変えることもできます。

[上に戻る](#基本設定)　　　[目次に戻る](FTKR_ItemCompositionSystem.ja.md#目次)

#
[トップページに戻る](README.md)