[トップページに戻る](README.md)

# [FTKR_ExItemBox](FTKR_ExItemBox.js) プラグイン

アイテムボックスの仕様を変更するプラグインプラグインです。

ダウンロード: [FTKR_ExItemBox.js](https://raw.githubusercontent.com/futokoro/RPGMaker/master/FTKR_ExItemBox.js)

# 目次

以下の項目の順でプラグインの使い方を説明します。
1. [概要](#概要)
1. [表示レイアウトの変更](#表示レイアウトの変更)
1. [アイテムカテゴリーの変更](#アイテムカテゴリーの変更)
1. [アイテムボックスの所持容量の設定](#アイテムボックスの所持容量の設定)
1. [アイテムのスタックの設定](#アイテムのスタックの設定)
1. [サブコマンド](#サブコマンド)
* [プラグインの更新履歴](#プラグインの更新履歴)
* [ライセンス](#ライセンス)

# 概要

本プラグインを実装することで、アイテムボックスの仕様を変更します。

1. アイテムボックス内の表示レイアウトを変更できます。
2. アイテムカテゴリー(アイテム、武器、防具、大事なもの)を変更できます。
3. アイテムボックスに所持容量を設定できます。
4. アイテムの最大スタック数を超えた場合、別にスタックすることができます。
5. アイテム選択後にサブコマンドを表示して、アイテムを捨てることができます。

[目次に戻る](#目次)

# 表示レイアウトの変更

アイテムボックスの表示レイアウトを変更できます。
プラグインパラメータ--表示設定--で設定できます。
変更できる内容は以下の通りです。

## アイテムボックスの表示列数と列同士の間隔
`Number of Columns`<br>
アイテムを横に並べる数を設定します。

`Horizontal Space`<br>
アイテムを横に並べた時の表示間隔を設定します。

`Window Line Height`<br>
ウィンドウ内の1行の高さを設定します。

## アイコンの表示有無とアイコンサイズ
`Display Item Icon`<br>
アイテムアイコンを表示するか設定します。
* 1 - 表示する
* 0 - 表示しない

`Icon Scale`<br>
アイコンの表示サイズ(%)を設定します。
100%以上に設定すると行の高さも変わります。

## アイテム名の表示有無とフォントサイズ
`Display Item Name`<br>
アイテム名を表示するか設定します。
* 1 - 表示する
* 0 - 表示しない

`Font Size`<br>
フォントサイズを設定します。
サイズによって行の高さも変わります。

## アイテム名と所持数の区切り記号
`Display Separator`<br>
アイテム名と所持数の区切り記号を指定します。

## 所持数の表示有無と表示桁数
`Display Item Number`<br>
アイテム所持数を表示するか設定します。
* 0 - 表示しない
* 1 - 表示する
* 2 - 所持数が1の時表示しない

`Display Number of Digit`<br>
アイテム所持数の表示桁数を設定します。
所持数が表示桁数を超えると横に圧縮して表示します。

## 行に対するアイテム名と所持数の表示高さ
`Display Text Position Y`<br>
アイテム名と所持数の表示高さを設定
* 0 - 上揃え
* 1 - 中央
* 2 - 下揃え

[目次に戻る](#目次)

# アイテムカテゴリーの変更

アイテム画面や、ショップ画面のアイテムカテゴリーの表示を変更します。
この機能を使うためには、プラグインパラメータ`<Enable Category>`を有効にしてください。

## アイテムカテゴリーの表示を変える
プラグインパラメータ`<Items Category>`に設定した内容によってアイテムカテゴリーの表示を変えることができます。

入力内容は以下。

| 入力内容 | 表示名 | 対象カテゴリー |
| --- | --- | --- |
| item     | データベースの用語で設定した「アイテム」 | アイテム |
| weapon   | データベースの用語で設定した「武器」| 武器 |
| armor    | データベースの用語で設定した「防具」| 防具 |
| keyItem  | データベースの用語で設定した「大事なもの」| 大事なもの |
| all      | プラグインパラメータ`<Category All Name>`で設定した表示名 | アイテム・武器・防具・大事なもの |
| 任意の文字列 | 入力した任意の文字列 | 入力した任意の文字列を追加カテゴリー(*1)として設定したアイテム |

カンマ(,)を使って複数設定できます。
入力した順番にアイテムカテゴリーを表示します。

(*1)カテゴリーの追加<br>
アイテムや武器・防具のメモ欄に以下のタグを記入することで追加したカテゴリーをアイテム・武器・防具に設定することができます。
```
<EIB_カテゴリー: カテゴリー名>
<EIB_CATEGORY: category_name>
```

## アイテムカテゴリーの選択を無くす
プラグインパラメータ`<Enable Category>`を無効にすると、アイテムカテゴリーの選択をなくして、直接アイテムボックスを選択できます。

この時アイテムボックスに表示されるアイテムのカテゴリーは、プラグインパラメータ`<Items Category>`の１番目に設定したカテゴリーです。

[目次に戻る](#目次)

# アイテムボックスの所持容量の設定

アイテムボックスに所持容量を設定することができます。
この機能を使うためには、プラグインパラメータ`<Enable Capacity>`を有効にしてください。

所持容量を設定すると、そのカテゴリーは設定した数の種類までしか所持することができなくなります。
この設定数以上のアイテムは所持することができず、入手しても自動的に破棄します。

アイテムの所持容量を 10 に設定した場合、アイテムは 10種類までしか所持できません。
この時、各アイテムが何個持っているかは関係ありません。

設定できるカテゴリーは「アイテム」「武器」「防具」の３つです。
「大事なもの」は、アイテムに含まれます。

アイテムボックスに空きがあるかどうかは、以下のスクリプトで判定できます。
```
$gameParty.isItemsCapacityOk()   - アイテムの所持容量
$gameParty.isWeaponsCapacityOk() - 武器の所持容量
$gameParty.isArmorsCapacityOk()  - 防具の所持容量
```

## プラグインパラメータで[初期値]を設定
以下のプラグインパラメータで、初期値を設定することができます。
0 を設定した場合は、容量が無制限になります。

### [アイテム]の所持容量
`<Item Capacity>`

### [武器]の所持容量
`<Weapon Capacity>`

### [防具]の所持容量
`<Armor Capacity>`

## プラグインコマンドで[追加分]を設定
プラグインコマンドでも所持容量を設定できます。
ただし、この追加分はプラグインパラメータの値とは別に計算します。
```
EIB_所持容量設定 [カテゴリー] [数値] [計算方法]
EIB_SET_CAPACITY [category] [value] [calc_method]
```
[カテゴリー]の入力内容で、どのカテゴリーの容量を変えるか指定します。
* アイテム or ITEM
* 武器 or WEAPON
* 防具 or ARMOR

[数値]の入力内容
* \V[x] でゲーム内変数ID x の値を参照できます。

[計算方法]の入力内容で、[数値]をどのように計算するか指定します。
計算方法を指定しない場合は、代入を適用します。
* 加算 or ADD or +
* 減算 or SUBTRACT or -
* 乗算 or MULTIPLY or *
* 除算 or DIVIDE or /
* 剰余 or MOD or %
* 代入 or SUBSTITUTE or =

例)
```   
EIB_所持容量設定 アイテム 10 加算
EIB_所持容量設定 防具 \V[1] 代入
EIB_SET_CAPACITY WEAPON 5 SUBTRACT
```

上記の設定によって所持容量は以下の結果になります。
```
所持容量　＝　初期値　＋　追加分
```
[目次に戻る](#目次)

# アイテムのスタックの設定

アイテムボックスの中で、１つのアイテムは１行にまとめて表示します。
そして、所持数を表示することでそのアイテムを何個所持しているか分かります。
これがアイテムのスタックです。

当プラグインでは、このスタック機能を変更することができます。
この機能を使うためには、プラグインパラメータ`<Enable Capacity>`を有効にしてください。

## アイテムのスタック数の設定
アイテムをスタックできる数は以下の方法で設定できます。

### プラグインパラメータで設定
`<Max Stack Number>`

### アイテムのメモ欄に以下のタグを記入
```
<EIB_スタック: x>
<EIB_STACK: x>
```
* x - 最大スタック数

設定が被った場合、メモ欄の設定を優先します。
この設定数以上のアイテムは所持することができず、入手しても自動的に破棄します。

## スタックの重複

プラグインパラメータ`<Enable Duplicate Stack>`を許可設定するとスタック数以上にアイテムを所持することができます。

スタック数を超えた分は、別の行に表示します。
なお、この別の行に表示したアイテムは、所持容量上別のアイテムとして計算します。

例えば「ポーション」を20個所持していて、スタック数の最大が10の場合
「ポーション」の行が 2つできます。
この時、アイテムを２種類持っていると数えます。

[目次に戻る](#目次)

# サブコマンド

当プラグインによりメニューのアイテム画面で、アイテム選択後にサブコマンドを追加します。
この機能を使うためには、プラグインパラメータ`<Enable Subcommand>`を有効にしてください。

サブコマンドには以下のコマンドがあります。
1. 使う　 - アイテムを使用します。使用できない場合はグレー表示になります。
2. 捨てる - アイテムを捨てます。「大事なもの」は捨てることが出来ません。
3. やめる - サブコマンドを閉じます。

「捨てる」を実行すると、捨てるアイテムの数を設定します。
数を決めると確認画面を表示し、その画面で「実行する」を選択することで、アイテムを捨てることができます。

確認画面は、プラグインパラメータ`<Enable Confirmation>`で非表示設定にすることができます。

[目次に戻る](#目次)

# プラグインの更新履歴

| バージョン | 公開日 | 更新内容 |
| --- | --- | --- |
| [ver1.0.0](FTKR_ExItemBox.js) | 2017/06/04 | 初版公開 |

# ライセンス

本プラグインはMITライセンスのもとで公開しています。

[The MIT License (MIT)](https://opensource.org/licenses/mit-license.php)

#
[目次に戻る](#目次)

[トップページに戻る](README.md)